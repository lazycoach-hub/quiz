<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sales Attachment Style Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 0 20px;
    }
    .question {
      margin-bottom: 20px;
    }
    .hidden {
      display: none;
    }
    #result {
      margin-top: 30px;
      padding: 15px;
      background-color: #f0f0f0;
      border-radius: 5px;
    }
    h1, h2 {
      text-align: center;
    }
    .kartra-optin {
      margin-top: 40px;
    }
  </style>
</head>
<body>

  <h1>What's Your Sales Attachment Style?</h1>

  <div id="quiz"></div>

  <button id="submit">Submit Quiz</button>

  <div id="result" class="hidden">
    <h2>Your Results</h2>
    <p id="styleBreakdown"></p>

    <div class="kartra-optin">
      <p>Enter your details below to get the full breakdown and understand your results.</p>

      <!-- Start of Kartra Opt-In Embed Code -->
      <div class="optin-form-container" data-kw="your-kartra-code">
        <form method="post" action="https://app.kartra.com/redirect_to_kartra_optin_url" id="kartra_form" data-kwform="true">
          
          <input type="hidden" name="independent_percentage" id="kartra_independent">
          <input type="hidden" name="righteous_percentage" id="kartra_righteous">
          <input type="hidden" name="prestige_percentage" id="kartra_prestige">
          <input type="hidden" name="adaptive_percentage" id="kartra_adaptive">

          <label for="name">Name:</label><br>
          <input type="text" name="name" required><br><br>

          <label for="email">Email:</label><br>
          <input type="email" name="email" required><br><br>

          <input type="submit" value="Get My Full Report">
        </form>
      </div>
      <!-- End of Kartra Opt-In Embed Code -->
    </div>
  </div>

  <script>
    const questions = [
      {
        question: "I avoid following up with leads because I don't want to seem pushy.",
        scores: { Independent: 2, Righteous: 0, Prestige: 0, Adaptive: 0 }
      },
      {
        question: "I often think my competitors are unethical or fake.",
        scores: { Independent: 0, Righteous: 2, Prestige: 0, Adaptive: 0 }
      },
      {
        question: "I want my offers to be seen as high-value, even if people don’t buy.",
        scores: { Independent: 0, Righteous: 0, Prestige: 2, Adaptive: 0 }
      },
      {
        question: "I enjoy sharing my work even if it doesn’t lead to a sale.",
        scores: { Independent: 0, Righteous: 0, Prestige: 0, Adaptive: 2 }
      },
      {
        question: "I delay launching things until I feel fully ready.",
        scores: { Independent: 2, Righteous: 0, Prestige: 0, Adaptive: 0 }
      },
      {
        question: "I feel disillusioned with the coaching or healing industry.",
        scores: { Independent: 0, Righteous: 2, Prestige: 0, Adaptive: 0 }
      },
      {
        question: "People should be able to see how good I am without me needing to sell.",
        scores: { Independent: 0, Righteous: 0, Prestige: 2, Adaptive: 0 }
      }
    ];

    const quizDiv = document.getElementById('quiz');
    const resultDiv = document.getElementById('result');
    const styleBreakdown = document.getElementById('styleBreakdown');

    questions.forEach((q, i) => {
      const div = document.createElement('div');
      div.classList.add('question');
      div.innerHTML = `<p><strong>Q${i + 1}:</strong> ${q.question}</p>
        <label><input type="radio" name="q${i}" value="0"> Strongly Disagree</label><br>
        <label><input type="radio" name="q${i}" value="1"> Disagree</label><br>
        <label><input type="radio" name="q${i}" value="2"> Agree</label><br>
        <label><input type="radio" name="q${i}" value="3"> Strongly Agree</label>`;
      quizDiv.appendChild(div);
    });

    document.getElementById('submit').addEventListener('click', () => {
      const scores = { Independent: 0, Righteous: 0, Prestige: 0, Adaptive: 0 };
      let answered = 0;

      questions.forEach((q, i) => {
        const val = document.querySelector(`input[name="q${i}"]:checked`);
        if (val) {
          answered++;
          const multiplier = parseInt(val.value);
          for (let style in q.scores) {
            scores[style] += q.scores[style] * multiplier;
          }
        }
      });

      if (answered < questions.length) {
        alert("Please answer all questions.");
        return;
      }

      // Calculate percentages
      const total = Object.values(scores).reduce((a, b) => a + b, 0);
      const percentages = {};
      for (let style in scores) {
        percentages[style] = Math.round((scores[style] / total) * 100);
      }

      // Show results
      styleBreakdown.innerHTML = `
        <strong>Independent:</strong> ${percentages.Independent}%<br>
        <strong>Righteous:</strong> ${percentages.Righteous}%<br>
        <strong>Prestige:</strong> ${percentages.Prestige}%<br>
        <strong>Adaptive:</strong> ${percentages.Adaptive}%<br>
      `;

      // Populate Kartra hidden fields
      document.getElementById('kartra_independent').value = percentages.Independent;
      document.getElementById('kartra_righteous').value = percentages.Righteous;
      document.getElementById('kartra_prestige').value = percentages.Prestige;
      document.getElementById('kartra_adaptive').value = percentages.Adaptive;

      // Reveal result section
      resultDiv.classList.remove('hidden');
      window.scrollTo({ top: resultDiv.offsetTop, behavior: 'smooth' });
    });
  </script>
</body>
</html>
